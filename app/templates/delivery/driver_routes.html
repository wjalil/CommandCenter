{% extends "worker_base.html" %}
{% block title %}My Delivery Routes{% endblock %}
{% block nav_title %}My Routes{% endblock %}

{% block content %}
<div class="mb-4">
  <h2 class="section-title">My Delivery Routes</h2>
  <p style="color: var(--text-secondary);">{{ today.strftime('%A, %B %d, %Y') }}</p>
</div>

<!-- Today's Routes -->
<div class="mb-4">
  <h5 class="fw-bold mb-3">Today</h5>
  {% if todays_routes %}
  <div class="list-group">
    {% for route in todays_routes %}
    <a href="/delivery/driver/route/{{ route.id }}" class="list-group-item list-group-item-action">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h5 class="mb-1 fw-bold">{{ route.name }}</h5>
          <small style="color: var(--text-secondary);">{{ route.route_stops|length }} stops</small>
        </div>
        <div class="text-end">
          {% if route.status == 'assigned' %}
          <span class="badge bg-info">Ready</span>
          {% elif route.status == 'in_progress' %}
          <span class="badge bg-warning">In Progress</span>
          {% elif route.status == 'completed' %}
          <span class="badge bg-success">Completed</span>
          {% endif %}
        </div>
      </div>
      {% if route.notes %}
      <small style="color: var(--text-secondary);">{{ route.notes }}</small>
      {% endif %}
    </a>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">
    <p class="mb-0">No routes assigned for today.</p>
  </div>
  {% endif %}
</div>

<!-- Upcoming Routes -->
{% if upcoming_routes %}
<div class="mb-4">
  <h5 class="fw-bold mb-3">Upcoming</h5>
  <div class="list-group">
    {% for route in upcoming_routes %}
    <a href="/delivery/driver/route/{{ route.id }}" class="list-group-item list-group-item-action">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h5 class="mb-1 fw-bold">{{ route.name }}</h5>
          <small style="color: var(--text-secondary);">
            {{ route.date.strftime('%a, %b %d') }} - {{ route.route_stops|length }} stops
          </small>
        </div>
        <div class="text-end">
          <span class="badge bg-secondary">{{ route.date.strftime('%m/%d') }}</span>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
</div>
{% endif %}
{% endblock %}
